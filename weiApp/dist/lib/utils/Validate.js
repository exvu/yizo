'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});
var Validate = function () {
  function Validate() {
    //this.error = null;
    //this.validationData = null;
    //this.validate = null;
  }

  Validate.EXISTS_VALIDATE = 0; //或者0 存在字段就验证（默认）
  Validate.MUST_VALIDATE = 1; //或者1 必须验证
  Validate.VALUE_VALIDATE = 2; //或者2 值不为空的时候验证验证时间：

  Validate.check = function (data, validates) {
    this.error = null;
    this.validationData = {};
    if (!validates) {
      validates = this.validate;
    }

    //去除data值中的空格
    for (var k in data) {
      if (typeof data[k] === "string") {
        data[k] = data[k].trim();
      }
    }
    for (var key in validates) {
      var validate = validates[key];
      validate[3] = validate[3] ? validate[3] : this.EXISTS_VALIDATE;
      validate[4] = validate[4] ? validate[4] : 'regex';
      switch (validate[3]) {
        case this.MUST_VALIDATE:
          {
            //必须验证
            this._validationField(data, validate);
            break;
          }
        case this.VALUE_VALIDATE:
          {
            //不为空验证
            if (!/^\s*$/ig.test(data[validate[0]])) {
              this._validationField(data, validate);
            }
            break;
          }
        case this.EXISTS_VALIDATE:
        default:
          {
            //存在验证
            if (validate[0] in data) {
              this._validationField(data, validate);
            }
            break;
          }
      }
    }
    return Object.assign(data, this.validationData);
  };
  Validate._validationField = function (data, validate) {

    if (!this._validationFieldItem(data, validate)) {
      throw new Error(validate[2]);
    } else {
      if (!this.validationData) {
        this.validationData = {};
      }
      this.validationData[validate[0]] = data[validate[0]];
    }
  };
  Validate._validationFieldItem = function (data, validate) {
    validate[4] = validate[4].toLowerCase();
    switch (validate[4]) {
      case 'confirm':
        {
          return data[validate[0]] === data[validate[1]];
        }
      default:
        {
          return this._check(data[validate[0]], validate[1], validate[4]);
        }
    }
  };
  Validate._check = function (value, rule, type) {
    if (type === void 0) {
      type = 'regex';
    }
    type = type.toLowerCase();
    switch (type) {
      case 'between':
      case 'notbetween':
        {
          if (rule.length != 2) {
            throw TypeError("验证规则类型错误");
          }
          value = parseInt(value);
          var min = rule[0];
          var max = rule[1];
          return type == 'between' ? min <= value && value <= max : min > value || value > max;
        }
      case 'notin':
      case 'in':
        {
          return type == 'notin' ? rule.indexOf(value + '') == -1 : rule.indexOf(value + '') > -1;
        }
      case 'equal':
      case 'notequal':
        {
          return type == 'equal' ? value === rule : value !== rule;
        }
      case 'length':
        {
          var min = rule[0];
          var max = rule[1];
          var length_1 = value.length;
          return min <= length_1 && length_1 <= max;
        }
      case 'regex':
      default:
        {
          return this.regex(rule, value);
        }
    }
  };
  Validate.regex = function (reg, value) {
    var validate = {
      'require': /\S+/,
      'email': /^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/,
      'tel': /^((13[0-9])|(15[^4,\D])|(18[0,0-9]))\d{8}$/g,
      'api': /^(((\/[A-Za-z0-9-+.]+)|(\/:[^0-9]\w*)))+$/g,
      'number': /^\d+$/g
    };
    if (reg in validate) {
      reg = validate[reg];
    }
    try {
      return reg.test(typeof value !== 'undefined' ? value : '');
    } catch (e) {
      console.log(e);
      return false;
    }
  };
  return Validate;
}();
exports.default = Validate;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIlZhbGlkYXRlLmpzIl0sIm5hbWVzIjpbIlZhbGlkYXRlIiwiRVhJU1RTX1ZBTElEQVRFIiwiTVVTVF9WQUxJREFURSIsIlZBTFVFX1ZBTElEQVRFIiwiY2hlY2siLCJkYXRhIiwidmFsaWRhdGVzIiwiZXJyb3IiLCJ2YWxpZGF0aW9uRGF0YSIsInZhbGlkYXRlIiwiayIsInRyaW0iLCJrZXkiLCJfdmFsaWRhdGlvbkZpZWxkIiwidGVzdCIsIk9iamVjdCIsImFzc2lnbiIsIl92YWxpZGF0aW9uRmllbGRJdGVtIiwiRXJyb3IiLCJ0b0xvd2VyQ2FzZSIsIl9jaGVjayIsInZhbHVlIiwicnVsZSIsInR5cGUiLCJsZW5ndGgiLCJUeXBlRXJyb3IiLCJwYXJzZUludCIsIm1pbiIsIm1heCIsImluZGV4T2YiLCJsZW5ndGhfMSIsInJlZ2V4IiwicmVnIiwiZSIsImNvbnNvbGUiLCJsb2ciXSwibWFwcGluZ3MiOiI7Ozs7O0FBQUEsSUFBSUEsV0FBWSxZQUFZO0FBQzFCLFdBQVNBLFFBQVQsR0FBb0I7QUFDbEI7QUFDQTtBQUNBO0FBQ0Q7O0FBRURBLFdBQVNDLGVBQVQsR0FBMkIsQ0FBM0IsQ0FQMEIsQ0FPSTtBQUM5QkQsV0FBU0UsYUFBVCxHQUF5QixDQUF6QixDQVIwQixDQVFFO0FBQzVCRixXQUFTRyxjQUFULEdBQTBCLENBQTFCLENBVDBCLENBU0c7O0FBRTdCSCxXQUFTSSxLQUFULEdBQWlCLFVBQVVDLElBQVYsRUFBZ0JDLFNBQWhCLEVBQTJCO0FBQzFDLFNBQUtDLEtBQUwsR0FBYSxJQUFiO0FBQ0EsU0FBS0MsY0FBTCxHQUFzQixFQUF0QjtBQUNBLFFBQUksQ0FBQ0YsU0FBTCxFQUFnQjtBQUNkQSxrQkFBWSxLQUFLRyxRQUFqQjtBQUNEOztBQUVEO0FBQ0EsU0FBSyxJQUFJQyxDQUFULElBQWNMLElBQWQsRUFBb0I7QUFDbEIsVUFBSSxPQUFPQSxLQUFLSyxDQUFMLENBQVAsS0FBbUIsUUFBdkIsRUFBaUM7QUFDL0JMLGFBQUtLLENBQUwsSUFBVUwsS0FBS0ssQ0FBTCxFQUFRQyxJQUFSLEVBQVY7QUFDRDtBQUNGO0FBQ0QsU0FBSyxJQUFJQyxHQUFULElBQWdCTixTQUFoQixFQUEyQjtBQUN6QixVQUFJRyxXQUFXSCxVQUFVTSxHQUFWLENBQWY7QUFDQUgsZUFBUyxDQUFULElBQWNBLFNBQVMsQ0FBVCxJQUFjQSxTQUFTLENBQVQsQ0FBZCxHQUE0QixLQUFLUixlQUEvQztBQUNBUSxlQUFTLENBQVQsSUFBY0EsU0FBUyxDQUFULElBQWNBLFNBQVMsQ0FBVCxDQUFkLEdBQTRCLE9BQTFDO0FBQ0EsY0FBUUEsU0FBUyxDQUFULENBQVI7QUFDRSxhQUFLLEtBQUtQLGFBQVY7QUFBeUI7QUFDdkI7QUFDQSxpQkFBS1csZ0JBQUwsQ0FBc0JSLElBQXRCLEVBQTRCSSxRQUE1QjtBQUNBO0FBQ0Q7QUFDRCxhQUFLLEtBQUtOLGNBQVY7QUFBMEI7QUFDeEI7QUFDQSxnQkFBSSxDQUFFLFVBQVVXLElBQVYsQ0FBZVQsS0FBS0ksU0FBUyxDQUFULENBQUwsQ0FBZixDQUFOLEVBQTBDO0FBQ3hDLG1CQUFLSSxnQkFBTCxDQUFzQlIsSUFBdEIsRUFBNEJJLFFBQTVCO0FBQ0Q7QUFDRDtBQUNEO0FBQ0QsYUFBSyxLQUFLUixlQUFWO0FBQ0E7QUFBUztBQUNQO0FBQ0EsZ0JBQUlRLFNBQVMsQ0FBVCxLQUFlSixJQUFuQixFQUF5QjtBQUN2QixtQkFBS1EsZ0JBQUwsQ0FBc0JSLElBQXRCLEVBQTRCSSxRQUE1QjtBQUNEO0FBQ0Q7QUFDRDtBQXBCSDtBQXNCRDtBQUNELFdBQU9NLE9BQU9DLE1BQVAsQ0FBY1gsSUFBZCxFQUFvQixLQUFLRyxjQUF6QixDQUFQO0FBQ0QsR0F6Q0Q7QUEwQ0FSLFdBQVNhLGdCQUFULEdBQTRCLFVBQVVSLElBQVYsRUFBZ0JJLFFBQWhCLEVBQTBCOztBQUVwRCxRQUFJLENBQUMsS0FBS1Esb0JBQUwsQ0FBMEJaLElBQTFCLEVBQWdDSSxRQUFoQyxDQUFMLEVBQWdEO0FBQzlDLFlBQU0sSUFBSVMsS0FBSixDQUFVVCxTQUFTLENBQVQsQ0FBVixDQUFOO0FBQ0QsS0FGRCxNQUdLO0FBQ0gsVUFBSSxDQUFDLEtBQUtELGNBQVYsRUFBMEI7QUFDeEIsYUFBS0EsY0FBTCxHQUFzQixFQUF0QjtBQUNEO0FBQ0QsV0FBS0EsY0FBTCxDQUFvQkMsU0FBUyxDQUFULENBQXBCLElBQW1DSixLQUFLSSxTQUFTLENBQVQsQ0FBTCxDQUFuQztBQUNEO0FBQ0YsR0FYRDtBQVlBVCxXQUFTaUIsb0JBQVQsR0FBZ0MsVUFBVVosSUFBVixFQUFnQkksUUFBaEIsRUFBMEI7QUFDeERBLGFBQVMsQ0FBVCxJQUFjQSxTQUFTLENBQVQsRUFBWVUsV0FBWixFQUFkO0FBQ0EsWUFBUVYsU0FBUyxDQUFULENBQVI7QUFDRSxXQUFLLFNBQUw7QUFBZ0I7QUFDZCxpQkFBT0osS0FBS0ksU0FBUyxDQUFULENBQUwsTUFBc0JKLEtBQUtJLFNBQVMsQ0FBVCxDQUFMLENBQTdCO0FBQ0Q7QUFDRDtBQUFTO0FBQ1AsaUJBQU8sS0FBS1csTUFBTCxDQUFZZixLQUFLSSxTQUFTLENBQVQsQ0FBTCxDQUFaLEVBQStCQSxTQUFTLENBQVQsQ0FBL0IsRUFBNENBLFNBQVMsQ0FBVCxDQUE1QyxDQUFQO0FBQ0Q7QUFOSDtBQVFELEdBVkQ7QUFXQVQsV0FBU29CLE1BQVQsR0FBa0IsVUFBVUMsS0FBVixFQUFpQkMsSUFBakIsRUFBdUJDLElBQXZCLEVBQTZCO0FBQzdDLFFBQUlBLFNBQVMsS0FBSyxDQUFsQixFQUFxQjtBQUNuQkEsYUFBTyxPQUFQO0FBQ0Q7QUFDREEsV0FBT0EsS0FBS0osV0FBTCxFQUFQO0FBQ0EsWUFBUUksSUFBUjtBQUNFLFdBQUssU0FBTDtBQUNBLFdBQUssWUFBTDtBQUFtQjtBQUNqQixjQUFJRCxLQUFLRSxNQUFMLElBQWUsQ0FBbkIsRUFBc0I7QUFDcEIsa0JBQU1DLFVBQVUsVUFBVixDQUFOO0FBQ0Q7QUFDREosa0JBQVFLLFNBQVNMLEtBQVQsQ0FBUjtBQUNBLGNBQUlNLE1BQU1MLEtBQUssQ0FBTCxDQUFWO0FBQ0EsY0FBSU0sTUFBTU4sS0FBSyxDQUFMLENBQVY7QUFDQSxpQkFBT0MsUUFBUSxTQUFSLEdBQW9CSSxPQUFPTixLQUFQLElBQWdCQSxTQUFTTyxHQUE3QyxHQUFtREQsTUFBTU4sS0FBTixJQUFlQSxRQUFRTyxHQUFqRjtBQUNEO0FBQ0QsV0FBSyxPQUFMO0FBQ0EsV0FBSyxJQUFMO0FBQVc7QUFDVCxpQkFBT0wsUUFBUSxPQUFSLEdBQWtCRCxLQUFLTyxPQUFMLENBQWFSLFFBQVEsRUFBckIsS0FBNEIsQ0FBQyxDQUEvQyxHQUFtREMsS0FBS08sT0FBTCxDQUFhUixRQUFRLEVBQXJCLElBQTJCLENBQUMsQ0FBdEY7QUFDRDtBQUNELFdBQUssT0FBTDtBQUNBLFdBQUssVUFBTDtBQUFpQjtBQUNmLGlCQUFPRSxRQUFRLE9BQVIsR0FBa0JGLFVBQVVDLElBQTVCLEdBQW1DRCxVQUFVQyxJQUFwRDtBQUNEO0FBQ0QsV0FBSyxRQUFMO0FBQWU7QUFDYixjQUFJSyxNQUFNTCxLQUFLLENBQUwsQ0FBVjtBQUNBLGNBQUlNLE1BQU1OLEtBQUssQ0FBTCxDQUFWO0FBQ0EsY0FBSVEsV0FBV1QsTUFBTUcsTUFBckI7QUFDQSxpQkFBT0csT0FBT0csUUFBUCxJQUFtQkEsWUFBWUYsR0FBdEM7QUFDRDtBQUNELFdBQUssT0FBTDtBQUNBO0FBQVM7QUFDUCxpQkFBTyxLQUFLRyxLQUFMLENBQVdULElBQVgsRUFBaUJELEtBQWpCLENBQVA7QUFDRDtBQTVCSDtBQThCRCxHQW5DRDtBQW9DQXJCLFdBQVMrQixLQUFULEdBQWlCLFVBQVVDLEdBQVYsRUFBZVgsS0FBZixFQUFzQjtBQUNyQyxRQUFJWixXQUFXO0FBQ2IsaUJBQVcsS0FERTtBQUViLGVBQVMsK0NBRkk7QUFHYixhQUFPLDZDQUhNO0FBSWIsYUFBTyw0Q0FKTTtBQUtiLGdCQUFVO0FBTEcsS0FBZjtBQU9BLFFBQUl1QixPQUFPdkIsUUFBWCxFQUFxQjtBQUNuQnVCLFlBQU12QixTQUFTdUIsR0FBVCxDQUFOO0FBQ0Q7QUFDRCxRQUFJO0FBQ0YsYUFBT0EsSUFBSWxCLElBQUosQ0FBUyxPQUFPTyxLQUFQLEtBQWlCLFdBQWpCLEdBQStCQSxLQUEvQixHQUF1QyxFQUFoRCxDQUFQO0FBQ0QsS0FGRCxDQUdBLE9BQU9ZLENBQVAsRUFBVTtBQUNSQyxjQUFRQyxHQUFSLENBQVlGLENBQVo7QUFDQSxhQUFPLEtBQVA7QUFDRDtBQUNGLEdBbEJEO0FBbUJBLFNBQU9qQyxRQUFQO0FBQ0QsQ0FwSWUsRUFBaEI7a0JBcUllQSxRIiwiZmlsZSI6IlZhbGlkYXRlLmpzIiwic291cmNlc0NvbnRlbnQiOlsidmFyIFZhbGlkYXRlID0gKGZ1bmN0aW9uICgpIHtcclxuICBmdW5jdGlvbiBWYWxpZGF0ZSgpIHtcclxuICAgIC8vdGhpcy5lcnJvciA9IG51bGw7XHJcbiAgICAvL3RoaXMudmFsaWRhdGlvbkRhdGEgPSBudWxsO1xyXG4gICAgLy90aGlzLnZhbGlkYXRlID0gbnVsbDtcclxuICB9XHJcblxyXG4gIFZhbGlkYXRlLkVYSVNUU19WQUxJREFURSA9IDA7IC8v5oiW6ICFMCDlrZjlnKjlrZfmrrXlsLHpqozor4HvvIjpu5jorqTvvIlcclxuICBWYWxpZGF0ZS5NVVNUX1ZBTElEQVRFID0gMTsgLy/miJbogIUxIOW/hemhu+mqjOivgVxyXG4gIFZhbGlkYXRlLlZBTFVFX1ZBTElEQVRFID0gMjsgLy/miJbogIUyIOWAvOS4jeS4uuepuueahOaXtuWAmemqjOivgemqjOivgeaXtumXtO+8mlxyXG5cclxuICBWYWxpZGF0ZS5jaGVjayA9IGZ1bmN0aW9uIChkYXRhLCB2YWxpZGF0ZXMpIHtcclxuICAgIHRoaXMuZXJyb3IgPSBudWxsO1xyXG4gICAgdGhpcy52YWxpZGF0aW9uRGF0YSA9IHt9O1xyXG4gICAgaWYgKCF2YWxpZGF0ZXMpIHtcclxuICAgICAgdmFsaWRhdGVzID0gdGhpcy52YWxpZGF0ZTtcclxuICAgIH1cclxuXHJcbiAgICAvL+WOu+mZpGRhdGHlgLzkuK3nmoTnqbrmoLxcclxuICAgIGZvciAobGV0IGsgaW4gZGF0YSkge1xyXG4gICAgICBpZiAodHlwZW9mIGRhdGFba10gPT09IFwic3RyaW5nXCIpIHtcclxuICAgICAgICBkYXRhW2tdID0gZGF0YVtrXS50cmltKCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGZvciAodmFyIGtleSBpbiB2YWxpZGF0ZXMpIHtcclxuICAgICAgdmFyIHZhbGlkYXRlID0gdmFsaWRhdGVzW2tleV07XHJcbiAgICAgIHZhbGlkYXRlWzNdID0gdmFsaWRhdGVbM10gPyB2YWxpZGF0ZVszXSA6IHRoaXMuRVhJU1RTX1ZBTElEQVRFO1xyXG4gICAgICB2YWxpZGF0ZVs0XSA9IHZhbGlkYXRlWzRdID8gdmFsaWRhdGVbNF0gOiAncmVnZXgnO1xyXG4gICAgICBzd2l0Y2ggKHZhbGlkYXRlWzNdKSB7XHJcbiAgICAgICAgY2FzZSB0aGlzLk1VU1RfVkFMSURBVEU6IHtcclxuICAgICAgICAgIC8v5b+F6aG76aqM6K+BXHJcbiAgICAgICAgICB0aGlzLl92YWxpZGF0aW9uRmllbGQoZGF0YSwgdmFsaWRhdGUpO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhc2UgdGhpcy5WQUxVRV9WQUxJREFURToge1xyXG4gICAgICAgICAgLy/kuI3kuLrnqbrpqozor4FcclxuICAgICAgICAgIGlmICghKC9eXFxzKiQvaWcudGVzdChkYXRhW3ZhbGlkYXRlWzBdXSkpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3ZhbGlkYXRpb25GaWVsZChkYXRhLCB2YWxpZGF0ZSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICAgICAgY2FzZSB0aGlzLkVYSVNUU19WQUxJREFURTpcclxuICAgICAgICBkZWZhdWx0OiB7XHJcbiAgICAgICAgICAvL+WtmOWcqOmqjOivgVxyXG4gICAgICAgICAgaWYgKHZhbGlkYXRlWzBdIGluIGRhdGEpIHtcclxuICAgICAgICAgICAgdGhpcy5fdmFsaWRhdGlvbkZpZWxkKGRhdGEsIHZhbGlkYXRlKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oZGF0YSwgdGhpcy52YWxpZGF0aW9uRGF0YSk7XHJcbiAgfTtcclxuICBWYWxpZGF0ZS5fdmFsaWRhdGlvbkZpZWxkID0gZnVuY3Rpb24gKGRhdGEsIHZhbGlkYXRlKSB7XHJcblxyXG4gICAgaWYgKCF0aGlzLl92YWxpZGF0aW9uRmllbGRJdGVtKGRhdGEsIHZhbGlkYXRlKSkge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IodmFsaWRhdGVbMl0pO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgIGlmICghdGhpcy52YWxpZGF0aW9uRGF0YSkge1xyXG4gICAgICAgIHRoaXMudmFsaWRhdGlvbkRhdGEgPSB7fTtcclxuICAgICAgfVxyXG4gICAgICB0aGlzLnZhbGlkYXRpb25EYXRhW3ZhbGlkYXRlWzBdXSA9IGRhdGFbdmFsaWRhdGVbMF1dO1xyXG4gICAgfVxyXG4gIH07XHJcbiAgVmFsaWRhdGUuX3ZhbGlkYXRpb25GaWVsZEl0ZW0gPSBmdW5jdGlvbiAoZGF0YSwgdmFsaWRhdGUpIHtcclxuICAgIHZhbGlkYXRlWzRdID0gdmFsaWRhdGVbNF0udG9Mb3dlckNhc2UoKTtcclxuICAgIHN3aXRjaCAodmFsaWRhdGVbNF0pIHtcclxuICAgICAgY2FzZSAnY29uZmlybSc6IHtcclxuICAgICAgICByZXR1cm4gZGF0YVt2YWxpZGF0ZVswXV0gPT09IGRhdGFbdmFsaWRhdGVbMV1dO1xyXG4gICAgICB9XHJcbiAgICAgIGRlZmF1bHQ6IHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fY2hlY2soZGF0YVt2YWxpZGF0ZVswXV0sIHZhbGlkYXRlWzFdLCB2YWxpZGF0ZVs0XSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9O1xyXG4gIFZhbGlkYXRlLl9jaGVjayA9IGZ1bmN0aW9uICh2YWx1ZSwgcnVsZSwgdHlwZSkge1xyXG4gICAgaWYgKHR5cGUgPT09IHZvaWQgMCkge1xyXG4gICAgICB0eXBlID0gJ3JlZ2V4JztcclxuICAgIH1cclxuICAgIHR5cGUgPSB0eXBlLnRvTG93ZXJDYXNlKCk7XHJcbiAgICBzd2l0Y2ggKHR5cGUpIHtcclxuICAgICAgY2FzZSAnYmV0d2Vlbic6XHJcbiAgICAgIGNhc2UgJ25vdGJldHdlZW4nOiB7XHJcbiAgICAgICAgaWYgKHJ1bGUubGVuZ3RoICE9IDIpIHtcclxuICAgICAgICAgIHRocm93IFR5cGVFcnJvcihcIumqjOivgeinhOWImeexu+Wei+mUmeivr1wiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFsdWUgPSBwYXJzZUludCh2YWx1ZSk7XHJcbiAgICAgICAgdmFyIG1pbiA9IHJ1bGVbMF07XHJcbiAgICAgICAgdmFyIG1heCA9IHJ1bGVbMV07XHJcbiAgICAgICAgcmV0dXJuIHR5cGUgPT0gJ2JldHdlZW4nID8gbWluIDw9IHZhbHVlICYmIHZhbHVlIDw9IG1heCA6IG1pbiA+IHZhbHVlIHx8IHZhbHVlID4gbWF4O1xyXG4gICAgICB9XHJcbiAgICAgIGNhc2UgJ25vdGluJzpcclxuICAgICAgY2FzZSAnaW4nOiB7XHJcbiAgICAgICAgcmV0dXJuIHR5cGUgPT0gJ25vdGluJyA/IHJ1bGUuaW5kZXhPZih2YWx1ZSArICcnKSA9PSAtMSA6IHJ1bGUuaW5kZXhPZih2YWx1ZSArICcnKSA+IC0xO1xyXG4gICAgICB9XHJcbiAgICAgIGNhc2UgJ2VxdWFsJzpcclxuICAgICAgY2FzZSAnbm90ZXF1YWwnOiB7XHJcbiAgICAgICAgcmV0dXJuIHR5cGUgPT0gJ2VxdWFsJyA/IHZhbHVlID09PSBydWxlIDogdmFsdWUgIT09IHJ1bGU7XHJcbiAgICAgIH1cclxuICAgICAgY2FzZSAnbGVuZ3RoJzoge1xyXG4gICAgICAgIHZhciBtaW4gPSBydWxlWzBdO1xyXG4gICAgICAgIHZhciBtYXggPSBydWxlWzFdO1xyXG4gICAgICAgIHZhciBsZW5ndGhfMSA9IHZhbHVlLmxlbmd0aDtcclxuICAgICAgICByZXR1cm4gbWluIDw9IGxlbmd0aF8xICYmIGxlbmd0aF8xIDw9IG1heDtcclxuICAgICAgfVxyXG4gICAgICBjYXNlICdyZWdleCc6XHJcbiAgICAgIGRlZmF1bHQ6IHtcclxuICAgICAgICByZXR1cm4gdGhpcy5yZWdleChydWxlLCB2YWx1ZSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9O1xyXG4gIFZhbGlkYXRlLnJlZ2V4ID0gZnVuY3Rpb24gKHJlZywgdmFsdWUpIHtcclxuICAgIHZhciB2YWxpZGF0ZSA9IHtcclxuICAgICAgJ3JlcXVpcmUnOiAvXFxTKy8sXHJcbiAgICAgICdlbWFpbCc6IC9eXFx3KyhbLSsuXVxcdyspKkBcXHcrKFstLl1cXHcrKSpcXC5cXHcrKFstLl1cXHcrKSokLyxcclxuICAgICAgJ3RlbCc6IC9eKCgxM1swLTldKXwoMTVbXjQsXFxEXSl8KDE4WzAsMC05XSkpXFxkezh9JC9nLFxyXG4gICAgICAnYXBpJzogL14oKChcXC9bQS1aYS16MC05LSsuXSspfChcXC86W14wLTldXFx3KikpKSskL2csXHJcbiAgICAgICdudW1iZXInOiAvXlxcZCskL2dcclxuICAgIH07XHJcbiAgICBpZiAocmVnIGluIHZhbGlkYXRlKSB7XHJcbiAgICAgIHJlZyA9IHZhbGlkYXRlW3JlZ107XHJcbiAgICB9XHJcbiAgICB0cnkge1xyXG4gICAgICByZXR1cm4gcmVnLnRlc3QodHlwZW9mIHZhbHVlICE9PSAndW5kZWZpbmVkJyA/IHZhbHVlIDogJycpO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGUpIHtcclxuICAgICAgY29uc29sZS5sb2coZSlcclxuICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gIH07XHJcbiAgcmV0dXJuIFZhbGlkYXRlO1xyXG59KCkpO1xyXG5leHBvcnQgZGVmYXVsdCBWYWxpZGF0ZTsiXX0=